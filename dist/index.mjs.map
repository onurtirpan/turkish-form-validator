{"version":3,"sources":["../src/validators/tckn.ts"],"names":[],"mappings":";AAcA,IAAM,eAAA,GAAiD;AAAA,EACrD,UAAA,EAAY,oCAAA;AAAA,EACZ,aAAA,EAAe,oCAAA;AAAA,EACf,YAAA,EAAc,oCAAA;AAAA,EACd,mBAAA,EAAqB,0BAAA;AAAA,EACrB,qBAAA,EAAuB,0BAAA;AAAA,EACvB,cAAA,EAAgB;AAClB,CAAA;AAEO,SAAS,YAAA,CACd,MACA,OAAA,EACkB;AAClB,EAAA,MAAM,IAAA,GAAO,EAAE,GAAG,eAAA,EAAiB,GAAG,OAAA,EAAQ;AAE9C,EAAA,IAAI,CAAC,IAAA,EAAM;AACT,IAAA,OAAO;AAAA,MACL,OAAA,EAAS,KAAA;AAAA,MACT,OAAO,IAAA,CAAK;AAAA,KACd;AAAA,EACF;AAEA,EAAA,IAAI,IAAA,CAAK,SAAS,EAAA,EAAI;AACpB,IAAA,OAAO;AAAA,MACL,OAAA,EAAS,KAAA;AAAA,MACT,OAAO,IAAA,CAAK;AAAA,KACd;AAAA,EACF;AAEA,EAAA,IAAI,IAAA,CAAK,SAAS,EAAA,EAAI;AACpB,IAAA,OAAO;AAAA,MACL,OAAA,EAAS,KAAA;AAAA,MACT,OAAO,IAAA,CAAK;AAAA,KACd;AAAA,EACF;AAEA,EAAA,IAAI,IAAA,CAAK,CAAC,CAAA,KAAM,GAAA,EAAK;AACnB,IAAA,OAAO;AAAA,MACL,OAAA,EAAS,KAAA;AAAA,MACT,OAAO,IAAA,CAAK;AAAA,KACd;AAAA,EACF;AAEA,EAAA,IAAI,CAAC,OAAA,CAAQ,IAAA,CAAK,IAAI,CAAA,EAAG;AACvB,IAAA,OAAO;AAAA,MACL,OAAA,EAAS,KAAA;AAAA,MACT,OAAO,IAAA,CAAK;AAAA,KACd;AAAA,EACF;AAEA,EAAA,MAAM,SAAS,IAAA,CAAK,KAAA,CAAM,EAAE,CAAA,CAAE,IAAI,MAAM,CAAA;AAExC,EAAA,IAAI,MAAA,GAAS,CAAA;AACb,EAAA,IAAI,OAAA,GAAU,CAAA;AAEd,EAAA,KAAA,IAAS,CAAA,GAAI,CAAA,EAAG,CAAA,GAAI,CAAA,EAAG,CAAA,EAAA,EAAK;AAC1B,IAAA,IAAI,CAAA,GAAI,MAAM,CAAA,EAAG;AACf,MAAA,MAAA,IAAU,OAAO,CAAC,CAAA;AAAA,IACpB,CAAA,MAAO;AACL,MAAA,OAAA,IAAW,OAAO,CAAC,CAAA;AAAA,IACrB;AAAA,EACF;AAEA,EAAA,IAAI,WAAA,GAAA,CAAe,MAAA,GAAS,CAAA,GAAI,OAAA,IAAW,EAAA;AAC3C,EAAA,IAAI,cAAc,CAAA,EAAG;AACnB,IAAA,WAAA,IAAe,EAAA;AAAA,EACjB;AACA,EAAA,IAAI,WAAA,KAAgB,MAAA,CAAO,CAAC,CAAA,EAAG;AAC7B,IAAA,OAAO;AAAA,MACL,OAAA,EAAS,KAAA;AAAA,MACT,OAAO,IAAA,CAAK;AAAA,KACd;AAAA,EACF;AAEA,EAAA,MAAM,aAAA,GAAgB,MAAA,CACnB,KAAA,CAAM,CAAA,EAAG,EAAE,CAAA,CACX,MAAA,CAAO,CAAC,GAAA,EAAK,KAAA,KAAU,GAAA,GAAM,KAAA,EAAO,CAAC,CAAA;AACxC,EAAA,MAAM,cAAc,aAAA,GAAgB,EAAA;AACpC,EAAA,IAAI,WAAA,KAAgB,MAAA,CAAO,EAAE,CAAA,EAAG;AAC9B,IAAA,OAAO;AAAA,MACL,OAAA,EAAS,KAAA;AAAA,MACT,OAAO,IAAA,CAAK;AAAA,KACd;AAAA,EACF;AAEA,EAAA,OAAO;AAAA,IACL,OAAA,EAAS;AAAA,GACX;AACF","file":"index.mjs","sourcesContent":["export interface ValidationResult {\n  isValid: boolean;\n  error?: string;\n}\n\nexport interface ValidateTCKNOptions {\n  emptyError?: string;\n  tooShortError?: string;\n  tooLongError?: string;\n  firstDigitZeroError?: string;\n  invalidAlgorithmError?: string;\n  notDigitsError?: string;\n}\n\nconst DEFAULT_OPTIONS: Required<ValidateTCKNOptions> = {\n  emptyError: \"TCKN 11 haneli olmalıdır\",\n  tooShortError: \"TCKN 11 haneli olmalıdır\",\n  tooLongError: \"TCKN 11 haneli olmalıdır\",\n  firstDigitZeroError: \"Geçersiz TC Kimlik No\",\n  invalidAlgorithmError: \"Geçersiz TC Kimlik No\",\n  notDigitsError: \"TCKN sadece rakamlardan oluşmalıdır\",\n};\n\nexport function validateTCKN(\n  tckn: string,\n  options?: ValidateTCKNOptions\n): ValidationResult {\n  const opts = { ...DEFAULT_OPTIONS, ...options };\n\n  if (!tckn) {\n    return {\n      isValid: false,\n      error: opts.emptyError,\n    };\n  }\n\n  if (tckn.length > 11) {\n    return {\n      isValid: false,\n      error: opts.tooLongError,\n    };\n  }\n\n  if (tckn.length < 11) {\n    return {\n      isValid: false,\n      error: opts.tooShortError,\n    };\n  }\n\n  if (tckn[0] === \"0\") {\n    return {\n      isValid: false,\n      error: opts.firstDigitZeroError,\n    };\n  }\n\n  if (!/^\\d+$/.test(tckn)) {\n    return {\n      isValid: false,\n      error: opts.notDigitsError,\n    };\n  }\n\n  const digits = tckn.split(\"\").map(Number);\n\n  let oddSum = 0;\n  let evenSum = 0;\n\n  for (let i = 0; i < 9; i++) {\n    if (i % 2 === 0) {\n      oddSum += digits[i];\n    } else {\n      evenSum += digits[i];\n    }\n  }\n\n  let checkDigit1 = (oddSum * 7 - evenSum) % 10;\n  if (checkDigit1 < 0) {\n    checkDigit1 += 10;\n  }\n  if (checkDigit1 !== digits[9]) {\n    return {\n      isValid: false,\n      error: opts.invalidAlgorithmError,\n    };\n  }\n\n  const sumOfFirstTen = digits\n    .slice(0, 10)\n    .reduce((sum, digit) => sum + digit, 0);\n  const checkDigit2 = sumOfFirstTen % 10;\n  if (checkDigit2 !== digits[10]) {\n    return {\n      isValid: false,\n      error: opts.invalidAlgorithmError,\n    };\n  }\n\n  return {\n    isValid: true,\n  };\n}\n"]}